<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Load a user-provided token — credentials_byo_oauth2 • gargle</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Load a user-provided token — credentials_byo_oauth2"><meta property="og:description" content="This function does very little when called directly with a token:
If input has class request, i.e. it is a token that has been prepared
with httr::config(), the auth_token component is extracted. For
example, such input could be produced by googledrive::drive_token()
or bigrquery::bq_token().
Checks that the input appears to be a Google OAuth token, based on
the embedded oauth_endpoint.
Refreshes the token, if it's refreshable.
Returns its input.


There is no point providing scopes. They are ignored because the scopes
associated with the token have already been baked in to the token itself and
gargle does not support incremental authorization. The main point of
credentials_byo_oauth2() is to allow token_fetch() (and packages that
wrap it) to accommodate a &quot;bring your own token&quot; workflow.
This also makes it possible to obtain a token with one package and then
register it for use with another package. For example, the default scope
requested by googledrive is also sufficient for operations available in
googlesheets4. You could use a shared token like so:
library(googledrive)
library(googlesheets4)
drive_auth(email = &quot;jane_doe@example.com&quot;)
gs4_auth(token = drive_token())
# work with both packages freely now
"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gargle</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.2.0.9002</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/non-interactive-auth.html">Non-interactive auth</a>
    </li>
    <li>
      <a href="../articles/troubleshooting.html">Troubleshooting gargle auth</a>
    </li>
    <li>
      <a href="../articles/auth-from-web.html">Auth when using R in the browser</a>
    </li>
    <li>
      <a href="../articles/get-api-credentials.html">How to get your own API credentials</a>
    </li>
    <li class="divider">
    <li>
      <a href="../articles/index.html">More articles...</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="dropdown-header">Blog posts</li>
    <li>
      <a href="https://www.tidyverse.org/blog/2021/07/gargle-1-2-0/" class="external-link">gargle 1.2.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/blog/2019/08/gargle-hello-world/" class="external-link">gargle's debut on CRAN</a>
    </li>
    <li class="divider">
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/r-lib/gargle/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Load a user-provided token</h1>
    <small class="dont-index">Source: <a href="https://github.com/r-lib/gargle/blob/HEAD/R/credentials_byo_oauth2.R" class="external-link"><code>R/credentials_byo_oauth2.R</code></a></small>
    <div class="hidden name"><code>credentials_byo_oauth2.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function does very little when called directly with a token:</p><ul><li><p>If input has class <code>request</code>, i.e. it is a token that has been prepared
with <code><a href="https://httr.r-lib.org/reference/config.html" class="external-link">httr::config()</a></code>, the <code>auth_token</code> component is extracted. For
example, such input could be produced by <code>googledrive::drive_token()</code>
or <code>bigrquery::bq_token()</code>.</p></li>
<li><p>Checks that the input appears to be a Google OAuth token, based on
the embedded <code>oauth_endpoint</code>.</p></li>
<li><p>Refreshes the token, if it's refreshable.</p></li>
<li><p>Returns its input.</p></li>
</ul><p>There is no point providing <code>scopes</code>. They are ignored because the <code>scopes</code>
associated with the token have already been baked in to the token itself and
gargle does not support incremental authorization. The main point of
<code>credentials_byo_oauth2()</code> is to allow <code><a href="token_fetch.html">token_fetch()</a></code> (and packages that
wrap it) to accommodate a "bring your own token" workflow.</p>
<p>This also makes it possible to obtain a token with one package and then
register it for use with another package. For example, the default scope
requested by googledrive is also sufficient for operations available in
googlesheets4. You could use a shared token like so:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">library</span>(googledrive)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw">library</span>(googlesheets4)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="kw">drive_auth</span>(<span class="dt">email =</span> <span class="st">"jane_doe@example.com"</span>)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="kw">gs4_auth</span>(<span class="dt">token =</span> <span class="kw">drive_token</span>())</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="co"># work with both packages freely now</span></span></code></pre><p></p></div>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">credentials_byo_oauth2</span><span class="op">(</span>scopes <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">token</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>scopes</dt>
<dd><p>A character vector of scopes to request. Pick from those listed
at <a href="https://developers.google.com/identity/protocols/oauth2/scopes" class="external-link">https://developers.google.com/identity/protocols/oauth2/scopes</a>.</p>
<p>For certain token flows, the
<code>"https://www.googleapis.com/auth/userinfo.email"</code> scope is unconditionally
included. This grants permission to retrieve the email address associated
with a token; gargle uses this to index cached OAuth tokens. This grants no
permission to view or send email and is generally considered a low-value
scope.</p></dd>


<dt>token</dt>
<dd><p>A token with class <a href="https://httr.r-lib.org/reference/Token-class.html" class="external-link">Token2.0</a> or an object of
httr's class <code>request</code>, i.e. a token that has been prepared with
<code><a href="https://httr.r-lib.org/reference/config.html" class="external-link">httr::config()</a></code> and has a <a href="https://httr.r-lib.org/reference/Token-class.html" class="external-link">Token2.0</a> in the
<code>auth_token</code> component.</p></dd>


<dt>...</dt>
<dd><p>Additional arguments passed to all credential functions.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>An <a href="https://httr.r-lib.org/reference/Token-class.html" class="external-link">Token2.0</a>.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other credential functions: 
<code><a href="credentials_app_default.html">credentials_app_default</a>()</code>,
<code><a href="credentials_external_account.html">credentials_external_account</a>()</code>,
<code><a href="credentials_gce.html">credentials_gce</a>()</code>,
<code><a href="credentials_service_account.html">credentials_service_account</a>()</code>,
<code><a href="credentials_user_oauth2.html">credentials_user_oauth2</a>()</code>,
<code><a href="token_fetch.html">token_fetch</a>()</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># assume `my_token` is a Token2.0 object returned by a function such as</span></span></span>
<span class="r-in"><span><span class="co"># httr::oauth2.0_token() or gargle::gargle2.0_token()</span></span></span>
<span class="r-in"><span><span class="fu">credentials_byo_oauth2</span><span class="op">(</span>token <span class="op">=</span> <span class="va">my_token</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://jennybryan.org" class="external-link">Jennifer Bryan</a>, Craig Citro, Hadley Wickham, RStudio.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

